$(document).ready(function(){function e(){menuAnim=new TimelineMax({yoyo:!0,smoothChildTiming:!0,paused:!0}),menuAnim.staggerFromTo(n,.8,{x:-80,rotationX:-35,rotationY:0,rotationZ:0,transformOrigin:"50% 50%"},{x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,autoAlpha:1,ease:Sine.easeOut},.2),r=!1}function o(e){e===!0?TweenMax.to(l,1,{opacity:.1,ease:Sine.easeOut}):TweenMax.to(l,1,{opacity:1,ease:Sine.easeOut})}function t(e,o){"lyrics"===o&&($element=e.parent().parent().siblings(".music-item_lyrics")),"credits"===o&&($element=e.parent().parent().siblings(".music-item_credits")),$element.show(),c=$element.outerHeight(),yPos=$element.offset().top,$element.hide(),console.log(yPos),TweenMax.to(window,1,{scrollTo:{y:yPos},ease:Cubic.easeInOut}),setTimeout(function(){TweenMax.fromTo($element,2,{height:0,display:"block"},{height:c,autoAlpha:1,rotationZ:0,ease:Sine.easeOut})},1e3)}function i(e){$element=e.parent(),$element.slideUp(2e3)}var n,a,s,l,r,c,u,m,d,h,f,p,y,v,w,x,T,b,k,M,g;n=$(".js-nav-links li"),a=$(".js-nav-menu"),s=$(".header"),l=$(".js-logo"),m=$(".js-lyrics-link"),d=$(".js-credits-link"),h=$(".js-lyrics-close"),f=$(".js-credits-close"),y=$(".js-share"),v=$(".js-social-share"),w=$(".share"),T=$(".video-thumbs .item"),b=$(".fitVideo"),k=$(".overlay"),p=$(".js-overlay-close"),M=k.find(".overlay-centered"),g=$(".js-video-link"),Modernizr.mq("(max-width: 600px)")&&$(".js-fitText").fitText(.4),e(),a.on("click",function(){r===!1?(menuAnim.play(),Modernizr.mq("(max-width: 600px)")&&s.addClass("showMobile"),Modernizr.mq("(max-width: 1000px)")&&o(!0)):(menuAnim.reverse(),s.removeClass("showMobile"),Modernizr.mq("(max-width: 1000px)")&&o(!1)),r=!r}),n.on("mouseover",function(){TweenMax.to(n.not(this).find("a"),.6,{opacity:.1,ease:Sine.easeIn}),TweenMax.to($(this).find("a"),.6,{scale:1.2,ease:Sine.easeOut})}).on("mouseout",function(){TweenMax.to(n.find("a"),2,{opacity:1,scale:1,ease:Sine.easeIn})}),m.on("click",function(){t($(this),"lyrics")}),h.on("click",function(){i($(this))}),d.on("click",function(){t($(this),"credits")}),f.on("click",function(){i($(this))}),w.on("mouseenter",function(){TweenMax.fromTo(v,1.4,{x:50,autoAlpha:0,display:"inline-block",z:0},{x:0,autoAlpha:1,ease:Back.easeInOut})}).on("mouseleave",function(){TweenMax.fromTo(v,1.4,{x:0,autoAlpha:1},{x:50,autoAlpha:0,display:"none",z:0,ease:Back.easeInOut})}),$(".media-items").packery({itemSelector:".media-item",isInitLayout:!0}),$(window).on("scroll",function(){clearTimeout(x),$("body").hasClass("disable-hover")||($("body").addClass("disable-hover"),console.log("scrolling disabled")),x=setTimeout(function(){$("body").removeClass("disable-hover")},300)}),T.on("mouseenter",function(e){$(this).hasClass("hovered")||$(this).addClass("hovered")}).on("mouseleave",function(){$(this).hasClass("hovered")&&$(this).removeClass("hovered")}),b.length>0&&b.fitVids(),p.on("click",function(e){ov.to(k,1,{z:0,autoAlpha:0}),k.find("iframe").attr("src",""),e.preventDefault()}),g.on("click",function(e){$this=$(this),console.log($this.attr("data-youtube")),ov=new TimelineMax({yoyo:!0,smoothChildTiming:!0}),ov.fromTo(k,1.2,{z:0,width:0,autoAlpha:0,delay:2},{autoAlpha:1,width:"100%",ease:"Back.easeOut"}),ov.fromTo(M,2,{z:0,autoAlpha:0},{autoAlpha:1,ease:"Back.easeOut"}),k.find("h3").html($this.find(".title").html()),k.find("iframe").attr("src","//www.youtube.com/embed/"+$this.attr("data-youtube")+"?rel=0&controls=1&showinfo=0"),k.find(".overlay-description").html($this.find(".description .centered").html()),e.preventDefault()})});